<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <meta content="Untree.co" name="author">
  <link href="/static/favicon.png" rel="shortcut icon">

  <meta content="" name="description"/>
  <meta content="bootstrap, bootstrap4" name="keywords"/>

  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Source+Serif+Pro:wght@400;700&display=swap"
        rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/owl.carousel.min.css" rel="stylesheet">
  <link href="/css/owl.theme.default.min.css" rel="stylesheet">
  <link href="/css/jquery.fancybox.min.css" rel="stylesheet">
  <link href="/fonts/icomoon/style.css" rel="stylesheet">
  <link href="/fonts/flaticon/font/flaticon.css" rel="stylesheet">
  <link href="/css/daterangepicker.css" rel="stylesheet">
  <link href="/css/aos.css" rel="stylesheet">
  <link href="/css/header.css" rel="stylesheet">
  <link href="/css/board3.css" rel="stylesheet">

  <title>íƒœìš°ê³  íƒ€ê³  ë¨¸ë¬¼ê³ </title>
  <style>
    body {
      position: relative; /* bodyë¥¼ relativeë¡œ ì„¤ì • */
      overflow-x: hidden; /* ê°€ë¡œ ìŠ¤í¬ë¡¤ ë°©ì§€ */
      background-color: #f8f8f0; /* ì—°í•œ ì•„ì´ë³´ë¦¬ìƒ‰ ë°°ê²½ */
    }

    /* ì• ë‹ˆë©”ì´ì…˜ ì»¨í…Œì´ë„ˆ */
    .lodging-animation {
      position: absolute; /* ì ˆëŒ€ ìœ„ì¹˜ */
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1; /* bodyë³´ë‹¤ z-indexë¥¼ ë‚®ê²Œ ì„¤ì •í•˜ì—¬ body ë’¤ì— ìœ„ì¹˜í•˜ë„ë¡ í•¨ */
      pointer-events: none; /* ì• ë‹ˆë©”ì´ì…˜ ìš”ì†Œê°€ ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ë¥¼ ë°›ì§€ ì•Šë„ë¡ ì„¤ì • */
      overflow: hidden; /* ì»¨í…Œì´ë„ˆ ë°–ìœ¼ë¡œ ë‚˜ê°€ëŠ” ì´ëª¨í‹°ì½˜ ìˆ¨ê¹€ */
    }

    /* ì´ëª¨í‹°ì½˜ ìŠ¤íƒ€ì¼ */
    .lodging {
      position: absolute;
      font-size: 60px;
      animation: moveLodging 20s linear infinite; /* moveLodging ì• ë‹ˆë©”ì´ì…˜ ì ìš©, 20ì´ˆ ë™ì•ˆ ë¬´í•œ ë°˜ë³µ */
    }

    /* ì´ëª¨í‹°ì½˜ ìœ„ì¹˜ ë° ì• ë‹ˆë©”ì´ì…˜ ì§€ì—° ì‹œê°„ ì„¤ì • */
    .lodging:nth-child(1) {
      top: 10%;
      left: -10%; /* í™”ë©´ ì™¼ìª½ ë°–ì—ì„œ ì‹œì‘ */
      animation-delay: 0s; /* ì• ë‹ˆë©”ì´ì…˜ ì¦‰ì‹œ ì‹œì‘ */
    }

    .lodging:nth-child(2) {
      top: 20%;
      left: -10%;
      animation-delay: 2s; /* 2ì´ˆ í›„ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘ */
    }

    .lodging:nth-child(3) {
      top: 35%;
      left: -10%;
      animation-delay: 4s; /* 4ì´ˆ í›„ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘ */
    }

    .lodging:nth-child(4) {
      top: 50%;
      left: -10%;
      animation-delay: 6s; /* 6ì´ˆ í›„ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘ */
    }

    .lodging:nth-child(5) {
      top: 65%;
      left: -10%;
      animation-delay: 8s; /* 8ì´ˆ í›„ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘ */
    }

    .lodging:nth-child(6) {
      top: 80%;
      left: -10%;
      animation-delay: 10s; /* 10ì´ˆ í›„ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘ */
    }

    .lodging:nth-child(7) {
      top: 95%;
      left: -10%;
      animation-delay: 12s; /* 12ì´ˆ í›„ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘ */
    }

    .lodging:nth-child(8) {
      top: 10%;
      left: -10%;
      animation-delay: 14s; /* 14ì´ˆ í›„ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘ */
    }

    .lodging:nth-child(9) {
      top: 25%;
      left: -10%;
      animation-delay: 16s; /* 16ì´ˆ í›„ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘ */
    }

    .lodging:nth-child(10) {
      top: 40%;
      left: -10%;
      animation-delay: 18s; /* 18ì´ˆ í›„ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘ */
    }

    /* ì´ë™ ì• ë‹ˆë©”ì´ì…˜ */
    @keyframes moveLodging {
      0% {
        transform: translateX(0);
      }
      100% {
        transform: translateX(calc(100vw + 10%)); /* í™”ë©´ ì˜¤ë¥¸ìª½ ë°–ìœ¼ë¡œ ì´ë™ */
      }
    }
    #row:hover {
      /*transform: translateY(-5px); !* ìœ„ë¡œ ì‚´ì§ ì´ë™ *!*/
      /*box-shadow: 0px 15px 30px rgba(0, 0, 0, 0.3); !* ë” ì§„í•œ ê·¸ë¦¼ì *!*/
      transition: all 0.3s ease; /* ë¶€ë“œëŸ¬ìš´ ì „í™˜ íš¨ê³¼ */
    }
  </style>
</head>
<body>
<!-- ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•œ div ì¶”ê°€ -->
<div class="lodging-animation">
  <div class="lodging">ğŸ¨</div>
  <div class="lodging">ğŸ©</div>
  <div class="lodging">ğŸ›ï¸</div>
  <div class="lodging">ğŸ¨</div>
  <div class="lodging">ğŸ©</div>
  <div class="lodging">ğŸ›ï¸</div>
  <div class="lodging">ğŸ¨</div>
  <div class="lodging">ğŸ©</div>
  <div class="lodging">ğŸ›ï¸</div>
  <div class="lodging">ğŸ¨</div>
</div>

<!-- ##### Header Area Start ##### -->
<header class="header-area">
  <div th:replace="~{header.html}"></div>
</header>

</br></br>
</br></br>

<div class="row" id="row">
  <div class="col-12">
    <div class="search-wrapper">
      <select id="category">
        <option value="UserNickname">ë‹‰ë„¤ì„</option>
        <option value="RevTitle">ì œëª©</option>
        <option value="RevContent">ë‚´ìš©</option>
      </select>
      <div class="ui-input-container" id="ui-input">
        <input class="ui-input" id="keyword" placeholder="Type something..." required="" type="text"/>
        <div class="ui-input-underline"></div>
        <div class="ui-input-highlight"></div>
        <div class="ui-input-icon">
          <button id="searchBtn" type="submit">
            <svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path
                      d="M21 21L16.65 16.65M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z"
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"></path>
            </svg>
          </button>
        </div>
      </div>
      <input id="board1-form1" type="button" class="btn-board-form" value="ê¸€ì“°ê¸°"/>
    </div>
  </div>
  <form class="board1">
    <br/>

    <div class="divider">
      <h3 class="table-text">ë‚˜ë¥¼ ë…¹ì—¬ì¤„ í¸ì•ˆí•œ ìˆ™ì†Œ ì°¾ê¸°!</h3>
    </div>

    <br/>

    <!-- íƒœìš°ê³  ëª©ë¡ ë³´ê¸° -->
    <div class="boardmenu">
      <div id="board1-album1" class="board-item1 d-flex flex-wrap">
        <!-- ê²Œì‹œê¸€ ë¡œë“œ -->
      </div>

    </div>

    <div class="board1-bod1-a">
      <!-- í˜ì´ì§• ë²„íŠ¼ -->
      <div id="paging" class="pagination">
      </div>

    </div>
  </form>

</div>
</div>
<div id="loginId" style="display:none;" th:text="${session.loginId}"></div>

<!-- ë¡œê·¸ì¸/íšŒì›ê°€ì… ëª¨ë‹¬ -->
<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="loginModalLabel">ë¡œê·¸ì¸ ë˜ëŠ” íšŒì›ê°€ì…</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form action="/mLogin" method="post">
          <fieldset>
            <label>ì•„ì´ë”” : <input type="text" name="UserId" required/></label><br/>
            <label>ë¹„ë°€ë²ˆí˜¸ : <input type="password" name="UserPw" required/></label><br/>
            <input id="login" type="submit" value="ë¡œê·¸ì¸">
            <button id="joinButton" class="btn btn-primary">íšŒì›ê°€ì…</button>

          </fieldset>
        </form>

      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/jquery-3.4.1.min.js"></script>
<script src="/js/custom.js"></script>
<script>
  $(document).ready(function () {
    // ê¸€ì“°ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ "/Board/boardform"ìœ¼ë¡œ ì´ë™
    $('#board1-form1').click(function () {
      // ì„¸ì…˜ì—ì„œ ë¡œê·¸ì¸ ì•„ì´ë”” ê°€ì ¸ì˜¤ê¸° (ì„œë²„ì—ì„œ ì„¤ì •í•œ ê°’)
      const loginId = $('#loginId').text(); // th:text="${session.loginId}"

      // ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
      if (loginId === "") {
        // ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ê²½ìš°
        alert("ë¡œê·¸ì¸ í›„ ì´ìš©í•´ì£¼ì„¸ìš”.");
        // ë¡œê·¸ì¸ ëª¨ë‹¬ ì°½ ë„ìš°ê¸° (bootstrap ëª¨ë‹¬)
        document.getElementById("loginModal").style.display = "block";
        document.querySelector('.modal-overlay').style.display = 'block';
        return; // í•¨ìˆ˜ ì¢…ë£Œ
      }
      window.location.href = '/boardformForm';
    });

    let list = [];
    let page = 1;        // í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸
    let limit = 8;       // í•œ í˜ì´ì§€ì— ì¶œë ¥ë  ë°ì´í„° ê°œìˆ˜
    const block = 5;     // í•œ ë¸”ë¡ì— ì¶œë ¥ë  í˜ì´ì§€ ê°œìˆ˜
    let count = 0;       // ì „ì²´ ë°ì´í„° ê°œìˆ˜

    function getCategoryNumFromUrl() {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get('categoryNum');
    }

    // ì´ˆê¸° ë°ì´í„° ë¡œë“œ (ìˆ˜ì •)
    const categoryNum = getCategoryNumFromUrl(); // URLì—ì„œ categoryNum ê°€ì ¸ì˜¤ê¸°
    loadBoardList(categoryNum); // ê°€ì ¸ì˜¨ categoryNum ì‚¬ìš©

    // loadBoardList í•¨ìˆ˜ (categoryNum íŒŒë¼ë¯¸í„° ì‚¬ìš©)
    function loadBoardList(categoryNum) {
      $.ajax({
        type: "post",
        url: "/boardList",
        data: {categoryNum: categoryNum}, // categoryNum ì‚¬ìš©
        success: (result) => {
          list = result;
          count = list.length;
          page = 1;
          pagingList(page);
        },
        error: () => {
          alert('boardList ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨!!');
        }
      });
    }

    function pagingList(page) {
      const maxPage = Math.ceil(count / limit);
      const startRow = (page - 1) * limit;
      const endRow = Math.min(page * limit - 1, count - 1);

      const startPage = Math.floor((page - 1) / block) * block + 1;
      const endPage = Math.min(startPage + block - 1, maxPage);

      // ê²Œì‹œê¸€ ì¶œë ¥ (ë¦¬ìŠ¤íŠ¸ í˜•ì‹)
      let output = '';
      if (count > 0) {
        for (let i = startRow; i <= endRow; i++) {
          const board = list[i];
          const imageUrl = board[4] ? `/boardUpload/${board[4]}` : '/images/default.png'; // ê¸°ë³¸ ì´ë¯¸ì§€ ì„¤ì •
          output += `
    <div class="board-item">
        <div class="board-thumbnail">
            <a href="/boarddetail/${board[0]}">
                <img src="${imageUrl}" alt="board Image" onerror="this.src='/images/default.png'"/>
            </a>
        </div>
        <div class="board-details">
            <a href="/boarddetail/${board[0]}" class="board-title">${board[1]}</a> <!-- B_TITLE -->
            <div class="board-info">
                <p>ì§€ì—­: ${board[9]}</p> <!-- R_ADDR -->
                <p>ì¼ì •: ${new Date(board[6]).toLocaleDateString()} ~ ${new Date(board[7]).toLocaleDateString()}</p> <!-- B_START, B_END -->
                <p>ì¸ì›ìˆ˜: ${board[3]} / ${board[2]}</p> <!-- CNT_NAME -->
            </div>
        </div>
    </div>
`;
        }
      } else {
        output = '<p>ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
      }
      $('#board1-album1').html(output);
// ê²Œì‹œê¸€ ê°œìˆ˜ì— ë”°ë¼ board-item ìŠ¤íƒ€ì¼ ì¡°ì •
      const boardItemCount = $('#board1-album1 .board-item').length;
      if (boardItemCount === 1) {
        $('#board1-album1 .board-item').css('width', '100%'); // 1ê°œì¼ ë•ŒëŠ” í•œ ì¤„ ê½‰ ì±„ìš°ê¸°
        $('#board1-album1').css('justify-content', 'center'); // ê°€ìš´ë° ì •ë ¬
      } else {
        $('#board1-album1 .board-item').css('width', 'calc(50% - 10px)'); // 2ê°œ ì´ìƒì¼ ë•ŒëŠ” ê¸°ì¡´ ìŠ¤íƒ€ì¼ ì ìš©
        $('#board1-album1').css('justify-content', 'space-between'); // ì–‘ìª½ ì •ë ¬
      }
      // í˜ì´ì§• ì¶œë ¥
      let pageNum = '';

      pageNum += page <= 1
              ? `<span class="prev">ì´ì „</span>`
              : `<a href="#" class="prev" data-page="${page - 1}">ì´ì „</a>`;

      for (let i = startPage; i <= endPage; i++) {
        pageNum += page === i
                ? `<span class="iNum">${i}</span>`
                : `<a href="#" class="iNum" data-page="${i}">${i}</a>`;
      }

      pageNum += page >= maxPage
              ? `<span class="next">ë‹¤ìŒ</span>`
              : `<a href="#" class="next" data-page="${page + 1}">ë‹¤ìŒ</a>`;

      $('#paging').html(pageNum);
    }

    // í˜ì´ì§• ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    $('#paging').on('click', 'a', function (e) {
      e.preventDefault();
      page = parseInt($(this).data('page'));
      pagingList(page);
    });

    // ê²Œì‹œê¸€ ê°¯ìˆ˜ ë³€ê²½
    $('#limit').change(function () {
      limit = parseInt($(this).val());
      page = 1; // í˜ì´ì§€ ë²ˆí˜¸ ì´ˆê¸°í™”
      pagingList(page);
    });
    // ê²€ìƒ‰ ê¸°ëŠ¥ ì¶”ê°€
    $('#searchBtn').click(function() {
      const category = $('#category').val();
      const keyword = $('#keyword').val();

      if (keyword === "") {
        alert("ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        return;
      }

      $.ajax({
        type: "post",
        url: "/searchBoardList", // ê²€ìƒ‰ì„ ì²˜ë¦¬í•  ìƒˆë¡œìš´ URL
        data: {
          categoryNum: categoryNum, // ì¹´í…Œê³ ë¦¬ ë²ˆí˜¸
          category: category, // ê²€ìƒ‰ ì¹´í…Œê³ ë¦¬ (ì œëª©, ë‹‰ë„¤ì„, ë‚´ìš©)
          keyword: keyword // ê²€ìƒ‰ì–´
        },
        success: (result) => {
          list = result;
          count = list.length;
          page = 1;
          pagingList(page);
        },
        error: () => {
          alert('ê²€ìƒ‰ ì‹¤íŒ¨!!');
        }
      });
    });
  });

</script>
</body>
</html>