<div class="header">
    <div class="header-left">
        <img id="logo" src="../assets/img/logo/TaewoogoLogo2.png" alt="Logo"><br/>
    </div>

    <!-- 메뉴 -->
    <div class="button-container">
        <button class="btn-53 btn-1" id="board1">
            <div class="original">태우고</div>
            <div class="letters">
                <span>태</span>
                <span>우</span>
                <span>고</span>
            </div>
        </button>
        <button class="btn-53 btn-2" id="board2">
            <div class="original">타고</div>
            <div class="letters">
                <span>타</span>
                <span>고</span>
            </div>
        </button>
        <button class="btn-53 btn-3" id="board3">
            <div class="original">머물고</div>
            <div class="letters">
                <span>머</span>
                <span>물</span>
                <span>고</span>
            </div>
        </button>
        <button class="btn-53 btn-4" id="board4">
            <div class="original">남기고</div>
            <div class="letters">
                <span>남</span>
                <span>기</span>
                <span>고</span>
            </div>
        </button>
    </div>
    <!-- 로그인/회원가입 or 마이페이지/로그아웃 -->
    <div class="auth-container">
        <span class="auth-item" th:value="${session.loginNickname}"></span>
        <div th:if="${session.loginId == null}" class="auth-buttons">
            <span id="showJoinModal" class="auth-item">회원가입</span>
            <span id="showLoginModal" class="auth-item">로그인</span>
        </div>
        <div th:if="${session.loginId != null}" class="auth-buttons">
            <span id="myPage" class="auth-item">마이페이지</span>
            <span id="logout" class="auth-item">로그아웃</span>
        </div>
    </div>

    <div class="modal-overlay" style="display: none;"></div>
    <!-- 로그인 모달 -->
    <div class="modal" id="loginModal">
        <span id="closeLoginModal" class="close">×</span>
        <h2 class="modal-title" id="loginModalLabel">로그인</h2>
        <div class="modal-content">
            <div class="modal-body">
                <form action="/mLogin" method="post">
                    <p class="form-title">가입하신 계정으로 로그인해주세요!</p>
                    <div class="input-container">
                        <input type="text" name="UserId" placeholder="아이디">
                        <span>
                    </span>
                    </div>
                    <div class="input-container">
                        <input type="password" name="UserPw" placeholder="비밀번호">
                    </div>
                    <button id="loginbutton" type="submit" class="submit">
                        로그인
                    </button>

                    <p class="signup-link">
                        계정이 없으신가요?
                        <button id="signbutton"><a href="/mJoinForm">회원가입</a></button>
                    </p>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal-overlay" style="display: none;"></div>

<!-- 회원가입 모달 -->
<div class="modal" id="joinModal">
    <span id="closeJoinModal" class="close">×</span>
    <form action="/mJoin" method="POST" enctype="multipart/form-data" id="joinForm" class="join-form">
        <table style="margin: auto 0">
            <!-- 아이디 -->
            <tr>
                <th>아이디</th>
                <td>
                    <input type="text" id="User_Id" name="UserId"
                           pattern="^(?=.*[a-zA-Z])[a-zA-Z0-9]{3,12}$"
                           title="아이디는 3~12자, 영어를 최소 하나 포함해야 하며, 숫자 포함은 선택입니다." minlength="3" maxlength="12"
                           required/>
                    <br/>
                    <p id="check1"></p>
                </td>
            </tr>
            <!-- 비밀번호 -->
            <tr>
                <th>비밀번호</th>
                <td>
                    <input type="password" id="User_Pw" name="UserPw" required/>
                    <br/>
                    <p id="check2"></p>
                </td>
            </tr>
            <!-- 비밀번호 확인 -->
            <tr>
                <th>비밀번호 확인</th>
                <td>
                    <input type="password" id="checkPw" required/>
                    <br/>
                    <p id="check3"></p>
                </td>
            </tr>
            <!-- 이름 -->
            <tr>
                <th>이름</th>
                <td><input type="text" name="UserName" id="UserName" pattern="^[가-힣]{2,5}$"
                           title="이름은 2~5자의 한글(초성X)만 입력 가능합니다." minlength="1" maxlength="5" required/></td>
            </tr>
            <!-- 닉네임 -->
            <tr>
                <th>닉네임</th>
                <td>
                    <input type="text" name="UserNickname" id="UserNickname" pattern="^[가-힣]{1,5}$"
                           title="닉네임은 1~5자의 한글만 입력 가능합니다." maxlength="5" required/>
                    <div th:if="${UserNicknameError}" th:text="${UserNicknameError}"
                         style="color: red;"></div>
                    <div th:if="${nicknameError}" th:text="${nicknameError}" style="color: red;"></div>
                    <p id="checkNickname"></p>
                </td>
            </tr>

            <tr>
                <th>생년월일</th>
                <td><input type="date" name="UserBirth"/></td>
            </tr>
            <!-- 성별 -->
            <tr>
                <th>성별</th>
                <td>
                    <div class="options" id="genderButtons">
                        <button type="button" class="option" onclick="selectOption('남성')">남성</button>
                        <button type="button" class="option" onclick="selectOption('여성')">여성</button>
                        <button type="button" class="option" onclick="selectOption('기타')">기타</button>
                    </div>
                    <input type="hidden" name="UserGender" id="GType" required/>
                    <div id="selectedOption" class="selected"></div>
                </td>
            </tr>
            <!-- 핸드폰 -->
            <tr>
                <th>연락처</th>
                <td colspan="3">
                    <span class="prefix">010</span>
                    <input type="tel" id="User_Phone" name="UserPhone" pattern="[0-9]{8}"
                           placeholder="나머지 8자리"
                           maxlength="8" required/>
                    <span id="check5">
        <input type="button" value="인증번호 발송" id="checkPhone"/>
      </span>
                </td>
            </tr>
            <!-- 이메일 -->
            <!-- 이메일 -->
            <!-- 이메일 -->
            <!-- 이메일 -->
            <tr>
                <th>이메일</th>
                <td colspan="3">
                    <input id="User_Email_Local" name="UserEmailLocal" required type="text"/>
                    @
                    <select id="User_Email_Domain_Select">
                        <option value="">선택</option>
                        <option value="naver.com">naver.com</option>
                        <option value="daum.net">daum.net</option>
                        <option value="gmail.com">gmail.com</option>
                        <option value="direct">직접 입력</option>
                    </select>
                    <input id="User_Email_Domain_Direct" name="UserEmailDomain" style="display: none;"
                           type="text"/>
                    <input id="User_Email" name="UserEmail" type="hidden"/>
                    <span id="check4">
                                <input id="checkEmail" type="button" value="인증"/>
                            </span>
                </td>
            </tr>
            <!-- 주소 -->
            <tr>
                <th>주소</th>
                <td>
                    <input type="button" onclick="sample6_execDaumPostcode()" value="우편번호 찾기"><br>
                    <input type="text" id="sample6_address" name="UserAddress" placeholder="주소"><br>
                    <input type="hidden" id="User_Address" />
                </td>
            </tr>
            <!-- 프로필 사진 -->
            <tr>
                <th>프로필사진</th>
                <td><input type="file" name="UserProfile" id="User_Profile"/>
                    <img id="preImage" width="150px"/></td>
            </tr>

            <!-- 자차 유무 -->
            <tr>
                <th>자차유무</th>
                <td>
                    <div class="options" id="carButtons">
                        <button type="button" class="option" onclick="selectOption2(1)">o</button>
                        <button type="button" class="option" onclick="selectOption2(0)">x</button>
                    </div>
                    <input type="hidden" name="CarNum" id="CType" required/>
                    <div id="selectedOption2" class="selected"></div>
                </td>
            </tr>
            <tr>
                <th colspan="2" style="text-align: center">
                    <input type="submit" id="submitForm" value="가입"/>
                    <input type="reset" id="resetForm" value="초기화"/>
                </th>
            </tr>
        </table>
    </form>
</div>

<div class="modal-overlay" style="display: none;"></div>
<!-- 약관동의 모달 -->
<div class="modal" id="termModal" style="display: none;">
    <div class="modal-content">
        <span id="closeTermModal" class="close">×</span>
        <h2 class="modal-title" id="termModalLabel">약관동의</h2>

        <div class="modal-body">
            <form action="/mTermAgree" method="POST" enctype="multipart/form-data" id="termForm">
                <div class="termForm">
                    <div class="check-all">
                        <label class="checkbox">
                            <input class="select-all" type="checkbox">
                            <span>서비스 이용약관과 개인정보 수집 및 이용, 마케팅 정보 수신에 모두 동의합니다.</span>
                        </label>
                    </div>
                    <ul class="list">
                        <li class="content">
                            <label class="checkbox">
                                <input class="terms-checkbox" name="TermsId" type="checkbox" value="1"/>
                                <span class="text">서비스 이용약관 동의 (필수)</span>
                            </label>
                            <!--            <button class="btnBox" id="service-info" type="button">내용보기</button>-->
                            <textarea name="TermsContent" readonly>제 1조 (목적)
본 약관은 태우고(이하 "회사")가 제공하는 온라인 플랫폼을 통해 회원들이 여행, 취미, 운동, 학습 등 다양한 활동을 함께 할 친구(메이트)를 찾을 수 있는 서비스(이하 "서비스")의 이용과 관련하여 회사와 회원 간의 권리, 의무 및 책임 사항을 규정함을 목적으로 합니다.

제 2조 (약관의 효력 및 변경)
① 효력 발생
본 약관은 서비스의 화면에 게시되거나, 회원에게 통지하는 형태로 효력을 발생하며, 회원은 서비스 이용 시 본 약관에 동의한 것으로 간주됩니다.

② 약관의 변경
회사는 본 약관을 변경할 수 있으며, 변경된 약관은 회사가 정한 방식(서비스 화면 공지, 이메일, 앱 알림 등)으로 사전 공지 후 효력이 발생합니다. 변경된 약관에 동의하지 않는 경우, 회원은 서비스 이용을 중단하거나 탈퇴할 수 있으며, 변경된 약관의 효력 발생 후에도 서비스를 계속 이용할 경우 변경된 약관에 동의한 것으로 간주됩니다.

제 3조 (서비스의 제공 및 변경)
① 서비스 제공
회사는 회원이 온라인 상에서 여행, 취미, 운동, 학습 등 다양한 활동을 함께 할 친구(메이트)를 찾을 수 있도록 지원하는 서비스를 제공합니다. 서비스는 웹사이트, 모바일 애플리케이션 등을 통해 제공됩니다.

② 서비스 변경
회사는 서비스의 품질 향상 및 기타 이유로 서비스를 변경하거나 추가할 수 있으며, 서비스의 변경에 대해 사전에 회원에게 공지합니다. 서비스가 일시적으로 중단될 수 있는 경우에도, 회사는 회원에게 사전 공지하거나 사후 안내를 진행할 수 있습니다.

제 4조 (회원 가입 및 이용 계약)
① 회원 가입 절차
서비스를 이용하고자 하는 자는 회사가 제공하는 회원 가입 양식에 필요한 정보를 정확하게 입력하고 본 약관에 동의하여야 합니다. 회원 가입 시 요구되는 정보는 반드시 실명으로 기재해야 하며, 허위 정보를 제공한 경우 서비스 이용에 제한을 받을 수 있습니다.

② 이용 계약의 성립
회원 가입 절차를 완료한 후 회사가 제공하는 서비스 이용을 위한 조건을 승인받은 시점부터 이용 계약이 성립되며, 회원에게 서비스 이용 권한이 부여됩니다.

③ 이용 계약 거부
회사는 다음의 사유가 있을 경우 회원 가입을 거부하거나 이용 계약을 해지할 수 있습니다:
· 타인의 명의를 도용한 경우
· 허위 정보를 기재한 경우
· 본 약관을 위반한 전력이 있는 경우
· 기타 회사의 서비스 제공에 부적합한 사유가 있는 경우

제 5조 (회원의 의무)
① 정확한 정보 제공
회원은 서비스 이용을 위해 제공하는 모든 정보가 정확하고 최신의 상태를 유지하도록 해야 하며, 정보에 변경이 있을 경우 즉시 수정해야 합니다. 이를 위반하여 발생한 모든 문제는 회원의 책임입니다.

② 서비스 이용의 법적 준수
회원은 서비스를 이용함에 있어 본 약관을 준수하고, 관련 법령을 지켜야 합니다. 타인의 권리를 침해하거나 불법적인 행위를 해서는 안 됩니다.

③ 회원 정보의 보호
회원은 자신의 계정과 비밀번호에 대한 관리 책임이 있으며, 이를 타인에게 양도하거나 대여할 수 없습니다. 회원의 계정으로 발생하는 모든 활동은 회원 본인의 책임으로 간주됩니다.

④ 불법적 콘텐츠 게시 금지
회원은 서비스 내에서 불법적이거나 부적절한 콘텐츠를 게시하거나 공유할 수 없습니다. 타인의 명예를 훼손하거나 불쾌감을 줄 수 있는 행위는 금지됩니다.

⑤ 타인과의 관계
회원은 서비스를 통해 다른 회원들과의 관계에서 불쾌감을 주는 언행을 하지 않으며, 타인에 대한 비방, 욕설, 차별적 발언 등을 하지 않아야 합니다.

제 6조 (회사의 의무)
① 서비스 제공
회사는 회원이 서비스 이용 중 불편함 없이 서비스를 제공받을 수 있도록 최선의 노력을 다하며, 시스템을 지속적으로 관리하고 개선합니다.

② 회원 정보 보호
회사는 회원의 개인정보를 보호하기 위해 최선의 기술적, 관리적 조치를 취합니다. 회사는 회원의 개인정보를 법령에 따라 적법하게 처리하며, 이를 제3자에게 무단으로 제공하지 않습니다.

③ 고객 지원
회사는 고객센터를 운영하여 회원의 문의 및 불만 사항을 처리하고, 서비스 제공과 관련한 필요한 도움을 제공합니다.

④ 서비스 중단 및 제한
회사는 서비스의 품질 향상, 보안 강화, 기술적 점검 등을 위해 일시적으로 서비스를 중단할 수 있으며, 이로 인한 회원의 불편에 대해 사전 공지 후 진행됩니다.

제 7조 (서비스 이용의 제한 및 중지)
① 서비스 이용 제한
회사는 회원이 본 약관을 위반하거나 부정한 방법으로 서비스를 이용할 경우, 다음과 같은 조치를 취할 수 있습니다:
 · 서비스 이용 정지
 · 회원의 계정 삭제
   ※ 관련 법령에 따른 처벌을 받을 수 있음

②서비스 중지 및 제한 사유
회사는 다음과 같은 사유가 발생한 경우 서비스 제공을 중단하거나 제한할 수 있습니다:
 · 회원이 타인의 개인정보를 도용하거나 유출한 경우
 · 회원이 본 약관을 위반한 경우
 · 서비스를 부당한 방법으로 이용한 경우
 · 시스템 장애, 보안 위협 등의 이유로 서비스 제공이 불가능한 경우
 · 계정 삭제
   ※ 회사는 서비스 이용 제한이나 이용 계약 해지 시, 회원의 계정을 삭제할 수 있습니다. 회원의 계정이 삭제된 경우, 해당 회원은 서비스를 다시 이용할 수 없습니다.

제 8조 (결제 및 환불)
① 서비스 이용 요금
회사는 서비스 이용에 대해 일정한 요금을 부과할 수 있으며, 요금의 결제는 회원이 서비스 이용 전에 명확하게 안내받고 동의한 후 진행됩니다.

② 결제 방법
회원은 서비스 이용을 위해 회사가 제공하는 결제 방법을 통해 요금을 결제할 수 있습니다.

③ 환불 규정
회원은 서비스를 이용한 후 일정 조건에 따라 환불을 요청할 수 있으며, 환불 정책에 따라 환불 절차가 진행됩니다. 환불이 불가능한 경우는 별도로 공지된 환불 정책에 따릅니다.

제 9조 (개인정보 보호)
① 개인정보 수집 및 이용
회사는 서비스 제공을 위해 회원의 개인정보를 수집하며, 회원은 이를 제공함으로써 개인정보 처리 방침에 동의한 것으로 간주됩니다.

② 개인정보 처리 방침
회사는 개인정보 보호를 위해 최선을 다하며, 회원의 개인정보를 제3자에게 제공하지 않습니다. 자세한 사항은 개인정보 처리 방침을 참고하시기 바랍니다.

제 10조 (면책 조항)
① 회사의 책임 한계
회사는 서비스 이용 중 발생한 손해에 대해 회원에게 책임을 지지 않습니다. 단, 법적으로 회사의 고의 또는 중대한 과실로 인한 손해에 대해서는 책임을 질 수 있습니다.

② 서비스 제공 중지
회사는 시스템 점검, 유지보수, 불가항력적인 이유(천재지변 등)로 서비스 제공을 일시적으로 중단할 수 있으며, 이로 인한 손해에 대해 책임을 지지 않습니다.

제 11조 (분쟁 해결)
① 분쟁 해결
회사는 서비스 이용과 관련하여 발생한 분쟁에 대해 원만한 해결을 위해 노력하며, 해결이 어려운 경우에는 관할 법원에 소송을 제기할 수 있습니다.

② 준거법
서비스 이용과 관련된 법적 분쟁에 대해 적용되는 법률은 대한민국 법률을 따릅니다.

제 12조 (기타)
① 약관의 해석
본 약관에 명시되지 않은 사항에 대해서는 관련 법령 및 회사의 정책에 따릅니다.
            </textarea>
                        </li>
                        <li class="content">
                            <label class="checkbox">
                                <input class="privacy-checkbox" name="TermsId" type="checkbox" value="2">
                                <span class="text">개인정보 수집 및 이용 (필수)</span>
                            </label>
                            <!--            <button class="btnBox" id="personal-info" type="button">내용보기</button>-->
                            <textarea name="TermsContent" readonly>
총칙
태우고(이하 "회사")는 이용자의 개인정보를 소중하게 보호하며, 개인정보 보호법 및 관련 법령을 준수합니다. 본 개인정보 처리방침은 회사가 이용자의 개인정보를 어떻게 수집, 이용, 보호하는지에 대해 구체적으로 설명하고 있습니다.

1. 개인정보 수집에 대한 동의
회사는 이용자가 개인정보 처리방침을 읽고 동의한 후에만 개인정보를 수집합니다. 이용자가 회원가입 또는 서비스를 이용하는 과정에서 동의를 하게 되며, 동의는 "동의합니다" 버튼을 클릭하거나 서비스 이용을 통해 이루어집니다.

2. 개인정보의 수집 및 이용 목적
회사는 아래의 목적을 위해 개인정보를 수집하고 이용합니다:
① 서비스 제공: 본인 확인, 서비스 계약 체결, 상품 배송 및 대금 결제
② 회원 관리: 회원 가입 및 서비스 제공, 본인 확인, 불만 처리 및 고객 지원
③ 마케팅 및 광고: 이벤트 안내, 서비스 개선을 위한 이용자 분석
④ 법적 의무 이행: 관련 법령에 따른 정보 제공 및 확인
⑤ 회사는 민감한 개인정보(예: 건강, 정치적 성향 등)는 수집하지 않습니다.

3. 수집하는 개인정보 항목
회사는 다음과 같은 개인정보를 수집합니다:
① 회원가입 및 서비스 이용: 이름, 이메일, 전화번호, 주소, 로그인 ID, 비밀번호, 결제 정보
② 자동 수집 항목: 접속 로그, IP 주소, 쿠키, 서비스 이용 기록 등

4. 개인정보 자동수집 장치의 설치, 운영 및 그 거부에 관한 사항
회사는 '쿠키(cookie)'를 사용하여 이용자의 정보를 수집하고, 이를 통해 서비스를 개선합니다. 이용자는 브라우저 설정을 통해 쿠키를 거부할 수 있습니다. 쿠키 설정 거부 시 일부 서비스 이용에 제한이 있을 수 있습니다.

5. 개인정보의 이용 및 제3자 제공
회사는 이용자의 개인정보를 다음과 같은 경우에만 제3자에게 제공할 수 있습니다:
 ① 이용자가 사전 동의한 경우
 ② 법령에 의한 요구가 있는 경우
 ③ 서비스 제공을 위해 제휴사와 개인정보를 공유할 경우
 ④ 제3자에게 개인정보 제공 시, 사전에 이용자에게 알리고 동의를 받습니다.

6. 개인정보의 열람 및 정정
이용자는 자신의 개인정보를 언제든지 열람하고 수정할 수 있습니다. "회원정보수정" 페이지에서 개인정보를 수정하거나, 개인정보 보호 담당자에게 요청하여 변경을 할 수 있습니다.

7. 개인정보의 삭제 및 동의철회
이용자는 언제든지 개인정보 수집 및 이용에 대한 동의를 철회할 수 있습니다. "회원탈퇴"를 통해 동의 철회 및 개인정보 삭제가 가능하며, 법적 요구사항에 따른 예외를 제외하고 즉시 처리됩니다.

8. 개인정보의 보유 및 이용기간
회사는 개인정보를 수집한 목적이 달성된 후에는 지체 없이 파기합니다. 다만, 관련 법령에 따라 일정 기간 동안 보관해야 할 개인정보는 아래와 같은 기간 동안 보관됩니다:
 ① 거래 기록: 5년 (전자상거래 등에서의 소비자 보호 법에 따라)
 ② 불만 및 분쟁 처리 기록: 3년
 ③ 회원가입 정보: 영구 보관
   ※ 이용자가 1년 이상 서비스를 이용하지 않으면, 개인정보를 분리하여 보관합니다.

9. 개인정보의 파기절차 및 방법
회사는 개인정보의 수집 및 이용 목적이 달성되면 즉시 파기합니다. 파기 절차와 방법은 다음과 같습니다:

 ① 전자적 방법: 개인정보는 재생할 수 없는 방법으로 삭제됩니다.
 ② 문서 형태: 종이 문서로 된 개인정보는 분쇄하거나 소각합니다.

10. 아동의 개인정보 보호
회사는 만 14세 미만 아동의 개인정보를 수집할 경우, 법정대리인의 동의를 받습니다. 법정대리인은 아동의 개인정보에 대해 열람, 정정, 동의철회를 요청할 수 있으며, 요청 시 즉시 처리됩니다.

11. 개인정보 보호를 위한 기술적 대책
회사는 개인정보의 분실, 도난, 누출 등을 방지하기 위해 다음과 같은 기술적 조치를 취하고 있습니다:
 ① 암호화: 중요한 개인정보는 암호화하여 저장 및 전송합니다.
 ② 백신 프로그램: 컴퓨터 바이러스의 침입을 방지하기 위해 최신 백신 프로그램을 사용합니다.
 ③ 침입 차단 시스템: 외부 침입을 방지하는 보안 시스템을 운영합니다.

12. 개인정보의 위탁처리
회사는 서비스 향상을 위해 일부 개인정보 처리를 외부 업체에 위탁할 수 있습니다. 위탁받은 업체는 개인정보 보호 관련 법령을 준수하며, 위탁 계약을 통해 개인정보 보호 의무를 명확히 합니다.

13. 의견수렴 및 불만처리
회사는 개인정보 처리와 관련한 불만이나 문의를 해결하기 위해 고객센터 및 개인정보 보호 담당자를 운영하고 있습니다:
 · 개인정보 보호 담당자: 관리자
 · 연락처: 010-1111-1111
 · 이메일 주소: admin@icia.co.kr
 · 이용자는 개인정보 보호와 관련된 불만을 접수할 수 있으며, 아래 기관에 문의할 수 있습니다:

개인정보 분쟁조정위원회: www.1336.or.kr / 1336
정보보호 마크 인증위원회: www.eprivacy.or.kr / 02-580-0533
대검찰청 인터넷범죄수사센터: icic.sppo.go.kr / 02-3480-3600
경찰청 사이버테러대응센터: www.ctrc.go.kr / 02-392-0330

14. 부칙(시행일)
현 개인정보처리방침은 2017년 9월 22일에 제정되었으며, 정부 및 회사의 정책 또는 보안기술의 변경에 따라 내용의 추가, 삭제 및 수정이 있을 경우에는 개정 최소 7일 전부터 ‘공지사항’란을 통해 고지하며, 본 정책은 시행 일자에 시행됩니다.

 · 공고일자: 2025년 01월 13일
 · 시행일자: 2025년 01월 13일
            </textarea>
                        </li>
                        <li class="content-inner">
                            <label class="checkbox">
                                <input class="select-all-marketing" type="checkbox">
                                <span class="text">마케팅 정보 수신 동의 (선택)</span>
                            </label>
                            <textarea name="TermsContent" readonly>마케팅 정보 수신 동의

회사는 회원에게 이메일 및 SNS를 통해 서비스 관련 정보와 맞춤형 광고, 혜택 등을 제공하기 위해, 아래와 같은 마케팅 목적의 정보 수신에 동의해 주시기 바랍니다:

① 이메일을 통한 정보 제공: 서비스 업데이트, 프로모션, 이벤트, 혜택 등 회사의 서비스와 관련된 정보를 이메일로 발송할 수 있습니다.

② SNS를 통한 정보 제공: 회사의 공식 SNS 계정을 통해 제공되는 이벤트 소식, 프로모션, 혜택 등과 관련된 정보를 SNS 알림, 메시지 등을 통해 전달할 수 있습니다.

회원은 언제든지 이메일이나 SNS를 통한 마케팅 정보 수신을 거부할 수 있으며, 이 경우 더 이상 해당 채널을 통한 정보가 제공되지 않습니다. 마케팅 정보 수신 동의는 서비스 제공에 필수적인 부분은 아니므로, 동의하지 않더라도 서비스 이용에 제한이 없습니다.
            </textarea>
                            <div class="select-checkbox">
                                <ul class="marketing-check">
                                    <li>
                                        <label class="chekbox">
                                            <input class="email-checkbox" name="TermsId" type="checkbox" value="3">
                                            <span class="text">이메일</span>
                                        </label>
                                    </li>
                                    <li>
                                        <label class="chekbox">
                                            <input class="sms-checkbox" name="TermsId" type="checkbox" value="4">
                                            <span class="text">SMS</span>
                                        </label>
                                    </li>
                                </ul>
                            </div>
                        </li>
                    </ul>
                </div>
                <span class="button-group">
            <button id="term-agree-btn" type="submit">다음</button>
        </span>
            </form>
        </div>
    </div>
</div>


<script src="/js/jquery-3.4.1.min.js"></script>
<script src="https://code.jquery.com/jquery-3.7.1.js"
        integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
        crossorigin="anonymous"></script>
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
        crossorigin="anonymous"></script>

<script>
    $(document).ready(function () {
        // 페이지 로드 시 현재 URL을 확인하여 활성화된 버튼 설정
        setActiveButton(window.location.href);

        // 버튼 클릭 이벤트 핸들러
        $('.btn-53').click(function (e) {
            e.preventDefault();
            const targetId = $(this).attr('id');
            let targetUrl;

            switch (targetId) {
                case 'board1':
                    targetUrl = '/board1Form?categoryNum=1';
                    break;
                case 'board2':
                    targetUrl = '/board2Form?categoryNum=2';
                    break;
                case 'board3':
                    targetUrl = '/board3Form?categoryNum=3';
                    break;
                case 'board4':
                    targetUrl = '/RList';
                    break;
                default:
                    return; // 알 수 없는 버튼 ID
            }

            // 버튼 활성화 상태 업데이트
            setActiveButton(targetUrl);

            // 페이지 이동
            window.location.href = targetUrl;
        });

        function setActiveButton(url) {
            // 모든 버튼에서 active 클래스 제거
            $('.btn-53').removeClass('active');

            // 현재 URL에 해당하는 버튼에 active 클래스 추가
            if (url.includes('/board1Form')) {
                $('#board1').addClass('active');
            } else if (url.includes('/board2Form')) {
                $('#board2').addClass('active');
            } else if (url.includes('/board3Form')) {
                $('#board3').addClass('active');
            } else if (url.includes('/RList')) {
                $('#board4').addClass('active');
            }
        }

        // ... (다른 JavaScript 코드) ...
        updateSubmitButton(); // 페이지 로드 시 초기 버튼 상태 설정
    });
</script>

<div th:if="${session.loginId == null}">
    <script type="text/javascript">
        window.onload = function () {
            // 페이지가 로드되면 errorMessage div에서 텍스트를 가져오기
            var errorMessage = document.getElementById("errorMessage").textContent;

            // errorMessage가 있을 경우 alert로 띄우기
            if (errorMessage) {
                alert(errorMessage); // 에러 메시지를 표시한 후

                // alert이 끝난 후 비동기적으로 error 메시지를 서버에서 삭제
                setTimeout(function () {
                    $.ajax({
                        url: "/clearError",  // 서버의 오류 메시지 삭제 API 엔드포인트
                        type: "POST",        // 요청 타입
                        success: function (response) {
                            // 서버에서 성공적으로 오류 메시지가 삭제됨
                            console.log("Error message cleared.");
                        },
                        error: function (xhr, status, error) {
                            // 오류 처리
                            console.error("Error clearing the error message:", error);
                        }
                    });
                }, 0); // alert 후 즉시 실행
            }
        };
    </script>
</div>
<script>
    // ... 기존 JavaScript 코드 ...
    $(document).ready(function() {
        $("#joinForm").submit(function(event) { // 회원가입 폼 ID로 수정: "joinForm"
            const userAddress = $("#sample6_address").val(); // 주소 입력 필드 ID로 수정
            if (!userAddress) { // 주소 필드 검사 추가
                alert("주소를 입력해주세요.");
                event.preventDefault();
                return;
            }
        });
    });
</script>
<script type="text/javascript">
    window.onload = function () {
        // 페이지가 로드되면 errorMessage div에서 텍스트를 가져오기
        var errorMessage = document.getElementById("errorMessage1").textContent;

        // errorMessage가 있을 경우 alert로 띄우기
        if (errorMessage) {
            alert(errorMessage); // 에러 메시지를 표시한 후

            // alert이 끝난 후 비동기적으로 error 메시지를 서버에서 삭제
            setTimeout(function () {
                $.ajax({
                    url: "/clearError",  // 서버의 오류 메시지 삭제 API 엔드포인트
                    type: "POST",        // 요청 타입
                    success: function (response) {
                        // 서버에서 성공적으로 오류 메시지가 삭제됨
                        console.log("Error message cleared.");
                    },
                    error: function (xhr, status, error) {
                        // 오류 처리
                        console.error("Error clearing the error message:", error);
                    }
                });
            }, 0); // alert 후 즉시 실행
        }
    };
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const dropdownBtn = document.getElementById("dropdown-btn");
        const dropdownMenu = document.querySelector(".dropdown-content");

        dropdownBtn.addEventListener("click", function (event) {
            // 드롭다운 메뉴 위치 설정
            const rect = dropdownBtn.getBoundingClientRect(); // 버튼 위치 정보 가져오기
            dropdownMenu.style.left = `${rect.left}px`; // 버튼의 왼쪽 위치
            dropdownMenu.style.top = `${rect.bottom + window.scrollY}px`; // 버튼의 하단 위치
            dropdownMenu.style.display = dropdownMenu.style.display === "block" ? "none" : "block";
        });

        // 드롭다운 외부를 클릭하면 메뉴 닫기
        window.addEventListener("click", function (event) {
            if (!event.target.closest("#dropdown-btn") && !event.target.closest(".dropdown-content")) {
                dropdownMenu.style.display = "none";
            }
        });
    });


    document.getElementById("logo")?.addEventListener("click", function () {
        window.location.href = "/index"; //
    });

    // // 로그인 버튼 클릭 시 /mLoginForm 페이지로 이동
    // document.getElementById("login")?.addEventListener("click", function () {
    //   window.location.href = "/mLoginForm"; // 로그인 페이지로 이동
    // });
    //
    // // 회원가입 버튼 클릭 시 /mJoinForm 페이지로 이동
    // document.getElementById("join")?.addEventListener("click", function () {
    //   window.location.href = "/mJoinForm"; // 회원가입 페이지로 이동
    // });

    // "태우고" 버튼 클릭 이벤트 핸들러 (수정)
    document.getElementById("board1")?.addEventListener("click", function (event) {
        event.preventDefault(); // 기본 동작 방지
        window.location.href = "/board1Form?categoryNum=1"; // URL에 categoryNum 파라미터 추가
    });

    // "타고" 버튼 클릭 이벤트 핸들러 (수정)
    document.getElementById("board2")?.addEventListener("click", function (event) {
        event.preventDefault();
        window.location.href = "/board2Form?categoryNum=2"; // URL에 categoryNum 파라미터 추가
    });

    // "머물고" 버튼 클릭 이벤트 핸들러 (수정)
    document.getElementById("board3")?.addEventListener("click", function (event) {
        event.preventDefault();
        window.location.href = "/board3Form?categoryNum=3"; // URL에 categoryNum 파라미터 추가
    });

    document.getElementById("board4")?.addEventListener("click", function () {
        window.location.href = "/RList"; // 마이페이지로 이동
    });

    // 마이페이지 버튼 클릭 시 /mMyPage 페이지로 이동 (로그인 상태에서만 표시)
    document.getElementById("myPage")?.addEventListener("click", function () {
        window.location.href = "/myPageForm"; // 마이페이지로 이동
    });

    // 로그아웃 버튼 클릭 시 로그아웃 처리
    document.getElementById("logout")?.addEventListener("click", function () {
        window.location.href = "/mLogout"; // 로그아웃 경로로 이동
    });


    $('#loginForm').on('submit', function (event) {
        event.preventDefault();

        const loginData = {
            UserId: $('#User_Id').val(),
            UserPw: $('#User_Pw').val()
        };

    });

    // 로그인 버튼 클릭 시 모달 열기
    document.getElementById("showLoginModal").onclick = function () {
        document.getElementById("loginModal").style.display = "block";
        document.querySelector('.modal-overlay').style.display = 'block';
    };

    // 회원가입 링크 클릭 이벤트 (<a> 태그와 <span> 태그 모두에 적용)
    document.querySelectorAll("#showJoinModal, #loginModal .signup-link a").forEach(element => {
        element.addEventListener("click", function (event) {
            event.preventDefault(); // <a> 태그의 기본 동작(페이지 이동) 방지

            // 로그인 모달이 열려있는 경우 닫기
            document.getElementById("loginModal").style.display = "none";

            // 약관 동의 모달 열기
            document.getElementById("termModal").style.display = "block";
            document.querySelector('.modal-overlay').style.display = 'block'; // 모달 오버레이 보이기
        });
    });

    // 회원가입 클릭 시 모달 열기(이용약관 후 회원가입)
    document.addEventListener('DOMContentLoaded', function () {
        const termsCheckbox = document.querySelectorAll('.terms-checkbox');
        const privacyCheckbox = document.querySelector('.privacy-checkbox');
        const termAgreeBtn = document.getElementById("term-agree-btn");

        const showJoinModalBtn = document.getElementById("showJoinModal");
        const termModal = document.getElementById('termModal');
        const joinModal = document.getElementById('joinModal');
        const closeTermModal = document.getElementById('closeTermModal');
        const closeJoinModal = document.getElementById('closeJoinModal');
        const modalOverlay = document.querySelector('.modal-overlay');

        const urlParams = new URLSearchParams(window.location.search);
        const showModal = urlParams.get('showModal');

        if (showModal === 'true') {
            joinModal.style.display = "block";  // 회원가입 모달 띄우기
            modalOverlay.style.display = 'block';  // 배경 오버레이 띄우기
        }

        // 약관 동의 모달 열기
        showJoinModalBtn.addEventListener('click', function (e) {
            e.preventDefault();
            termModal.style.display = "block";  // 약관 모달 띄우기
            modalOverlay.style.display = 'block';  // 배경 오버레이 띄우기
        });

        // "약관 동의" 버튼 클릭 시 필수 체크박스가 선택되었는지 확인
        termAgreeBtn.addEventListener('click', function (event) {
            let allChecked = true;

            // 필수 약관 체크박스 확인
            termsCheckbox.forEach(function (checkbox) {
                if (!checkbox.checked) {
                    allChecked = false;
                }
            });

            if (!allChecked || !privacyCheckbox.checked) {
                event.preventDefault();  // 체크되지 않으면 모달을 닫지 않음
                alert("모든 필수 약관에 동의해 주세요.");
            } else {
                // 약관 동의가 완료되면 서버에 POST 요청 보내기
                const termForm = document.getElementById('termForm');
                const formData = new FormData(termForm);

                fetch('/mTermAgree', {
                    method: 'POST',
                    body: formData
                })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            console.log("약관 동의 완료");
                            termModal.classList.remove('show'); // 약관 모달 닫기
                            joinModal.classList.add('show'); // 회원가입 모달 열기
                            modalOverlay.classList.add('show'); // 배경 오버레이 띄우기
                        } else {
                            alert(data.message); // 실패 메시지 처리
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                    });
            }
        });

        // "약관 동의" 모달 닫기
        closeTermModal.addEventListener('click', function () {
            termModal.style.display = 'none';  // 약관 모달 닫기
            modalOverlay.style.display = 'none';  // 배경 오버레이 숨기기
        });

        // "회원가입" 모달 닫기
        closeTermModal.addEventListener('click', function () {
            termModal.style.display = 'none';  // 약관 모달 닫기
            modalOverlay.style.display = 'none';  // 배경 오버레이 숨기기
        });

        // Select All 체크박스 처리
        const $agreementForm = document.querySelector('.termForm');
        const $selectAll = $agreementForm.querySelector('.select-all');
        const $listInput = $agreementForm.querySelectorAll('.list input');
        const $selectAllMkt = $agreementForm.querySelector('.select-all-marketing');
        const $mktListInput = $agreementForm.querySelectorAll('.marketing-check input');

        const toggleCheckbox = (allBox, itemBox) => {
            allBox.addEventListener('change', () => {
                itemBox.forEach((item) => {
                    item.checked = allBox.checked;
                });
            });
        }
        toggleCheckbox($selectAll, $listInput);
        toggleCheckbox($selectAllMkt, $mktListInput);

        // 개별 체크박스 체크 시 Select All 체크 처리
        $listInput.forEach((item) => {
            item.addEventListener('change', () => {
                const isChecked = Array.from($listInput).every(i => i.checked);
                $selectAll.checked = isChecked;
            });
        });

        $mktListInput.forEach((item) => {
            item.addEventListener('change', () => {
                const isChecked = Array.from($mktListInput).some(i => i.checked);
                $selectAllMkt.checked = isChecked;
            });
        });
    });

    // 로그인 모달 x 버튼 클릭 시 모달 닫기
    document.getElementById("closeLoginModal").onclick = function () {
        document.getElementById("loginModal").style.display = "none";
        document.querySelector('.modal-overlay').style.display = 'none';
    };

    // 회원가입 모달 x 버튼 클릭 시 모달 닫기
    document.getElementById("closeJoinModal").onclick = function () {
        document.getElementById("joinModal").style.display = "none";
        document.querySelector('.modal-overlay').style.display = 'none';
    };
</script>

<script>
    // 페이지 로드 시 초기화
    window.onload = function () {
        document.getElementById('GType').value = '';
        document.getElementById('selectedOption').textContent = '';
    };


    // // 페이지 로드가 완료된 후 실행
    // document.addEventListener("DOMContentLoaded", function() {
    //   // 아이디가 "index"인 요소에 클릭 이벤트 리스너 추가
    //   document.getElementById("index").addEventListener("click", function() {
    //     // "index" 페이지로 이동
    //     window.location.href = "/index";
    //   });
    // });

    // 아이디 중복체크
    let user_Id = $('#User_Id');
    let check1 = $('#check1');
    let check_id = false;

    user_Id.blur(() => {
        if (user_Id.val() === "" || !/^(?=.*[a-zA-Z])[a-zA-Z0-9]{3,12}$/.test(user_Id.val())) {
            check1.html("아이디는 3~12자, 영어를 최소 하나 포함해야 하며, 숫자 포함은 선택입니다.");
            check1.css('color', 'red');
            check_id = false;
            return;
        }

        $.ajax({
            type: "POST",
            url: "/idCheck",
            data: {"UserId": user_Id.val()},
            dataType: "text",
            success: function (result) {
                if (result == "OK") {
                    check1.html(user_Id.val() + "는 사용 가능한 아이디");
                    check1.css('color', 'blue');
                    check_id = true;
                } else {
                    check1.html(user_Id.val() + "는 사용중인 아이디");
                    check1.css('color', 'red');
                    check_id = false;
                }
            },
            error: function () {
                alert('idCheck 통신 실패!')
            }
        });
    });

    // 비밀번호 정규화
    let user_Pw = $('#User_Pw');
    let check2 = $('#check2');
    let check_pw1 = false;

    user_Pw.keyup(() => {
        let pwVal = user_Pw.val();

        // 기본값 : -1
        let num = pwVal.search(/[0-9]/);        // 숫자
        let eng = pwVal.search(/[a-z]/);        // 소문자
        let eng1 = pwVal.search(/[A-Z]/);        // 대문자
        let spe = pwVal.search(/[~!@#$%^&*]/);  // 특수문자
        let spc = pwVal.search(/\s/);           // 공백

        // 통합
        let checked = pwVal.search(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[~!@#$%^&*])[\S]{8,16}$/);

        if (pwVal.length < 8 || pwVal.length > 16) {
            check2.html('8-16자리 입력!');
            check2.css('color', 'red');
            check_pw1 = false;
        } else if (spc != -1) {
            check2.html('공백없이 입력!');
            check2.css('color', 'red');
            check_pw1 = false;
        } else if (num == -1 || eng == -1 || eng1 == -1 || spe == -1) {
            check2.html('숫자, 특수문자, 대소문자 혼합 입력!');
            check2.css('color', 'red');
            check_pw1 = false;
        } else {
            check2.html('사용가능한 비밀번호!');
            check2.css('color', 'blue');
            check_pw1 = true;
        }

    });

    // 비밀번호 확인
    let checkPw = $('#checkPw');
    let check3 = $('#check3');
    let check_pw2 = false;

    checkPw.keyup(() => {
        pwVal = user_Pw.val();
        let checkVal = checkPw.val();

        if (pwVal == checkVal) {
            check3.html(`비밀번호 일치`);
            check3.css('color', 'blue');
            check_pw2 = true;
        } else {
            check3.html(`비밀번호 불일치`);
            check3.css('color', 'red');
            check_pw2 = false;
        }
    });

    // 이메일 인증하기 (수정)
    let checkEmail = $('#checkEmail');
    let user_Email_Local = $('#User_Email_Local');
    let user_Email_Domain_Select = $('#User_Email_Domain_Select');
    let user_Email_Domain_Direct = $('#User_Email_Domain_Direct');
    let user_Email = $('#User_Email'); // hidden input
    let check4 = $('#check4');
    let check_email = false;

    // 도메인 선택 변경 이벤트
    user_Email_Domain_Select.change(() => {
        if (user_Email_Domain_Select.val() === "direct") {
            user_Email_Domain_Direct.show();
            user_Email_Domain_Direct.val("");
            user_Email.val(user_Email_Local.val() + "@"); // @만 추가
        } else {
            user_Email_Domain_Direct.hide();
            user_Email.val(user_Email_Local.val() + "@" + user_Email_Domain_Select.val());
        }
    });

    // 이메일 로컬 파트 변경 이벤트
    user_Email_Local.on("input", () => {
        if (user_Email_Domain_Select.val() !== "direct") {
            user_Email.val(user_Email_Local.val() + "@" + user_Email_Domain_Select.val());
        } else {
            user_Email.val(user_Email_Local.val() + "@"); // @만 추가
        }
    });

    // 이메일 도메인 직접 입력 변경 이벤트
    user_Email_Domain_Direct.on("input", () => {
        user_Email.val(user_Email_Local.val() + "@" + user_Email_Domain_Direct.val());
    });

    checkEmail.click(() => {
        if (!user_Email_Local.val() || user_Email.val().split('@')[1] === '') {
            alert("이메일 주소를 올바르게 입력해주세요.");
            return;
        }

        // AJAX를 사용하여 이메일 전송 및 인증번호 받아오기
        $.ajax({
            type: "POST",
            url: "/emailCheck",
            data: {"UserEmail": user_Email.val()}, // 전체 이메일 주소 전달
            dataType: "text",
            success: (uuid) => {
                console.log(uuid);
                check4.empty();
                check4.append(`<br/><input type="text" id="uuid1" placeholder="인증번호 입력"/>`);
                check4.append(` <input type="button" value="인증" id="btnUUID" data-value="${uuid}" />`);

                // 인증번호 전송 메시지 표시
                alert("인증번호가 전송되었습니다.");

                // 인증 버튼 클릭 이벤트 추가 (유효한 경우 메시지 자동 숨김)
                $('#btnUUID').click(() => {
                    let inputUuid = $('#uuid1').val();
                    let sentUuid = $('#btnUUID').attr("data-value");

                    if (inputUuid === sentUuid) {
                        check_email = true;

                    } else {
                        alert("인증번호가 일치하지 않습니다.");
                        check_email = false;
                    }
                });
            },
            error: () => {
                alert('emailCheck 통신 실패');
            }
        });
    });


    // 인증번호 확인하기
    // let btnUUID = $('#btnUUID');
    $(document).on('click', '#btnUUID', function () {
        let uuid = $(this).data("value");

        // 입력한 인증번호
        let uuid1 = $('#uuid1').val();

        if (uuid == uuid1) {
            alert('이메일 인증 성공');
            check4.hide();
            user_Email.attr('readonly', true);
            check_email = true;
        } else {
            alert('이메일 인증번호를 확인해주세요');
            $('#uuid1').val("");
            check_email = false;
        }
    });

    // 이름 유효성 검사
    let userName = $('#UserName');
    let checkName = false; // 이름 유효성 검사 결과 변수

    userName.blur(() => {
        let nameVal = userName.val();
        let nameRegExp = /^[가-힣]{2,5}$/; // 2~5자의 한글만 허용하는 정규식

        if (nameVal === "" || !nameRegExp.test(nameVal)) {
            alert("이름은 2~5자의 한글(초성X)만 입력 가능합니다.");
            checkName = false;
            updateSubmitButton(); // 가입 버튼 상태 업데이트 (필요한 경우)
            return;
        }

        checkName = true;
        updateSubmitButton(); // 가입 버튼 상태 업데이트 (필요한 경우)
    });

    function updateSubmitButton() {
        if (check_id && check_pw1 && check_pw2 && check_email && check_phone && check_nickname && check_address) {
            $('#submitForm').prop('disabled', true); // 모든 검사 통과 시 가입 버튼 활성화
        } else {
            $('#submitForm').prop('disabled', false); // 하나라도 통과 못하면 가입 버튼 비활성화
        }
    }

    // 닉네임 유효성 검사 및 중복 확인
    let userNickname = $('#UserNickname');
    let checkNickname = $('#checkNickname');
    let check_nickname = false;

    userNickname.on("input", function () {
        let nicknameVal = $(this).val();

        // 1. 5글자 초과 제한 (입력된 값 전체 길이 확인)
        if (nicknameVal.length > 5) {
            $(this).val(nicknameVal.substring(0, 5)); // 5글자만 남기고 잘라내기
            checkNickname.html("닉네임은 5글자 이내로 입력해주세요.");
            checkNickname.css('color', 'red');
            check_nickname = false;
            updateSubmitButton();
            return;
        }

        // 2. 중복 문자 3회 이상 검사 (5글자 이내일 때만 검사)
        let hasDuplicateChar = false;
        if (nicknameVal.length >= 3) {
            for (let i = 0; i < nicknameVal.length - 2; i++) {
                if (nicknameVal[i] === nicknameVal[i + 1] && nicknameVal[i] === nicknameVal[i + 2]) {
                    hasDuplicateChar = true;
                    break;
                }
            }
        }

        if (hasDuplicateChar) {
            checkNickname.html("동일한 문자를 3회 이상 연속으로 사용할 수 없습니다.");
            checkNickname.css('color', 'red');
            check_nickname = false;
            updateSubmitButton();
            return;
        }

        // 3. 유효성 검사 통과
        checkNickname.html(""); // 에러 메시지 초기화
        check_nickname = true; // 5글자 이내이고, 중복 문자 3회 미만이면 임시로 true 설정
        updateSubmitButton();
    });

    userNickname.blur(() => {
        let nicknameVal = userNickname.val();
        let nicknameRegExp = /^[가-힣]{1,5}$/; // 1~5자의 한글만 허용하는 정규식

        if (nicknameVal === "") {
            checkNickname.html("닉네임을 입력해주세요.");
            checkNickname.css('color', 'red');
            check_nickname = false;
            updateSubmitButton();
            return;
        }

        // 입력값이 있을 때만 정규식 및 중복 검사 수행
        if (nicknameVal.length > 0) {
            if (!nicknameRegExp.test(nicknameVal)) {
                checkNickname.html("닉네임은 1~5자의 한글만 입력 가능합니다.");
                checkNickname.css('color', 'red');
                check_nickname = false;
                updateSubmitButton();
                return;
            }
            // 닉네임 중복 확인 Ajax 요청
            $.ajax({
                type: "POST",
                url: "/nicknameCheck",
                data: {"UserNickname": nicknameVal},
                dataType: "text",
                success: function (result) {
                    if (result == "OK") {
                        checkNickname.html(nicknameVal + "는 사용 가능한 닉네임입니다.");
                        checkNickname.css('color', 'blue');
                        check_nickname = true;
                    } else {
                        checkNickname.html(nicknameVal + "는 이미 사용중인 닉네임입니다.");
                        checkNickname.css('color', 'red');
                        check_nickname = false;
                    }
                    updateSubmitButton();
                },
                error: function () {
                    alert('nicknameCheck 통신 실패!');
                }
            });
        }
    });

    // 다음 주소 API
    function sample6_execDaumPostcode() {
        new daum.Postcode({
            oncomplete: function (data) {
                var addr = ''; // 주소 변수
                var extraAddr = ''; // 참고항목 변수

                if (data.userSelectedType === 'R') { // 사용자가 도로명 주소를 선택했을 경우
                    addr = data.roadAddress;
                } else { // 사용자가 지번 주소를 선택했을 경우(J)
                    addr = data.jibunAddress;
                }

                document.getElementById("sample6_address").value = addr;
                /*document.getElementById("sample6_detailAddress").focus();*/
                updateSubmitButton();
            }
        }).open();
    }

    //유저 프로파일 미리보기
    $('#User_Profile').on('change', function (event) {
        let file = event.target.files[0];  // 선택한 파일
        console.log(file);  // 파일 객체가 잘 읽혔는지 확인
        if (file) {
            let reader = new FileReader();  // FileReader 생성

            reader.onload = function (e) {
                console.log(e.target.result);  // 읽힌 파일의 URL을 콘솔로 출력하여 확인
                $('#preImage').attr('src', e.target.result);  // 미리보기 이미지
            };

            // 파일을 Base64 데이터 URL로 변환
            reader.readAsDataURL(file);  // FileReader가 Base64로 변환
        } else {
            console.log('파일이 선택되지 않았습니다');
        }
    });

    // 주소 합치기 및 폼 제출
    $('#submitForm').click(() => {
        /*let user_Address = $('#User_Address');*/

        let addr1 = $('#sample6_address').val();
        check_address = !!addr1;
        /*let addr2 = $('#sample6_detailAddress').val();*/

        /*user_Address.val(`${addr1}, ${addr2}`);*/
        /*user_Address.val(`${addr1}`);*/
        // 인천시 미추홀구 매소홀로 6-32, 태승빌딩 5층

        // 010 추가
        let user_Phone = $('#User_Phone');
        user_Phone.val("010" + user_Phone.val());

        // 유효성 검사 및 폼 제출 (기존 코드와 동일)
        if (!check_id) {
            alert('아이디 중복체크를 진행해주세요');
        } else if (!check_pw1 || !check_pw2) {
            alert('비밀번호를 확인해주세요');
        } else if (!check_email) {
            alert('이메일 인증을 진행해주세요');
        } else if (!check_phone) {
            alert('휴대폰 인증을 진행해주세요')
        } else if (!check_nickname) { // 닉네임 유효성 검사 추가
            alert('닉네임 확인해주세요.');
        } else {
            mJoinForm.submit();
        }
    });

    // 휴대전화 관련 함수
    let check_phone = false;

    // 연락처 인증번호 발송
    document.getElementById("checkPhone").addEventListener("click", function () {
        // 010을 포함한 전체 전화번호 생성
        var phone = "010" + document.getElementById("User_Phone").value;

        // 연락처 유효성 검사 (010을 포함하여 검사)
        if (!/^010[0-9]{8}$/.test(phone) || phone.length !== 11) {
            alert("연락처를 010으로 시작하는 11자리 숫자(-없이)로 입력해주세요.");
            return;
        }

        // AJAX 요청 시 010을 포함한 전체 전화번호 전송
        $.ajax({
            url: '/PhoneCheck',
            method: 'POST',
            data: {"UserPhone": phone}, // 010을 포함한 전체 전화번호 전송
            dataType: "text",
            success: function (response) {
                // 인증번호 관련 처리 (기존 코드와 동일)

                console.log("연락처:", phone, "인증번호:", response);

                var check5 = $('#check5');
                check5.empty();
                check5.append(`<br/><input type="text" id="uuid" />`);
                check5.append(` <input type="button" value="인증" id="BtnPhone" data-value="${response}" />`);

                check_phone = true;
                alert('인증번호가 전송되었습니다.');
            },
            error: function (error) {
                alert('인증번호를 생성하는데 실패했습니다. 다시 시도해주세요.');
            }
        });
    });

    // 연락처 입력 필드에 숫자만 입력되도록 제한
    $("#User_Phone").on("input", function () {
        var value = $(this).val();
        var sanitizedValue = value.replace(/[^0-9]/g, ""); // 숫자 이외의 문자 제거
        $(this).val(sanitizedValue);
    });

    // 인증번호 확인
    $(document).on('click', '#BtnPhone', function () {
        if (!check_phone) {
            alert("먼저 인증번호 발송을 클릭해주세요.");
            return;
        }

        // 입력한 인증번호
        let btnPhone = $('#uuid').val();
        let btnPhone1 = $(this).data("value");

        if (btnPhone === btnPhone1) {
            alert('연락처 인증 성공');
            $("#check5").hide();  // 인증 성공 후 인증 필드 숨김
            $('#User_Phone').attr('readonly', true);  // 연락처를 읽기 전용으로 설정
        } else {
            alert('인증번호를 확인해주세요');
            $('#uuid').val("");  // 입력 필드 초기화
        }
    });

    function selectOption(selectedValue) {
        // 성별 선택에서만 active 클래스 적용
        const buttons = document.querySelectorAll('#genderButtons .option'); // 성별 선택 버튼만 선택
        buttons.forEach(button => button.classList.remove('active')); // 모든 성별 버튼에서 active 클래스 제거

        // 클릭된 버튼에 active 클래스 추가
        const selectedButton = event.target;
        selectedButton.classList.add('active');

        // 선택된 값 저장
        document.getElementById('GType').value = selectedValue; // 성별 값을 hidden input에 저장

        // 선택된 값을 'selected' div에 표시 (옵션)
        document.getElementById('selectedOption').textContent = selectedValue;
    }

    function selectOption2(value) {
        // 자차유무 선택에서만 active 클래스 적용
        const buttons = document.querySelectorAll('#carButtons .option'); // 자차유무 버튼만 선택
        buttons.forEach(button => button.classList.remove('active')); // 모든 자차유무 버튼에서 active 클래스 제거

        // 클릭된 버튼에 active 클래스 추가
        const selectedButton = event.target;
        selectedButton.classList.add('active');

        // 선택된 값 저장
        document.getElementById('CType').value = value; // 자차유무 값을 hidden input에 저장

        // 선택된 값을 'selected' div에 표시 (옵션)
        document.getElementById('selectedOption2').textContent = value === 1 ? 'o' : 'x';
    }
</script>